<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Bauer stereophonic-to-binaural DSP</title>







  
  <meta content="Boris Mikhaylov" name="author">
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1251"></head><body style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);" alink="#000099" link="#000099" vlink="#990099">
<table style="width: 700px; text-align: left; font-family: times new roman,times,serif;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top;"><big><span style="font-weight: bold;">Bauer stereophonic-to-binaural DSP: описание библиотеки.</span></big><br>
      <br>
Библиотека <a href="http://bs2b.sourceforge.net/" target="_top">bs2b</a> проста в
использовании. Смотрите таблицу 1 для примера. Это упрощенный код '<a href="src/bs2bstream.c">bs2bstream.c</a>'. Файлы 'bs2b.h', 'bs2bclass.h' и 'bs2bconvert.c' пакета исходного кода также могут помочь.<br>
Вы можете использовать 'bs2bstream' вместе с '<a href="http://lame.sourceforge.net/" target="_top">lame</a>' вот такой командной строкой:<br>&nbsp; lame -t --decode test-44-16.wav - | bs2bstream -4 | \<br>&nbsp;&nbsp;&nbsp;&nbsp;
lame -r -x -m j -s 44.1 --bitwidth 16 --preset extreme - test.mp3<br>или без '-x' перемены местами байтов входного файла, вот такой:<br>&nbsp;&nbsp;
lame -t --decode test-44-16.wav - | bs2bstream -4 | \<br>&nbsp; &nbsp;&nbsp;
lame -r -m j -s 44.1 --bitwidth 16 --preset extreme - test.mp3<br><br>
      <span style="font-weight: bold;">Таблица 1. Пример использования библиотеки bs2b.</span><br>
      <table style="width: 100%; background-color: rgb(255, 255, 204); text-align: left; font-family: courier new,courier,monospace;" border="0" cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="vertical-align: top;"><font size="-1"></font><font size="-1">#include &lt;stdio.h&gt;<br>
#include &lt;fcntl.h&gt;<br>
#include &lt;io.h&gt;<br>
            <br>
#include "bs2b.h"<br>
            <br>
int main( int argc, char *argv[] )<br>
{<br>
&nbsp; t_bs2bdp bs2bdp;<br>
&nbsp; short&nbsp;&nbsp;&nbsp; sample[ 2 ];<br>
            <br>
&nbsp; bs2bdp = bs2b_open();<br>
            <br>
&nbsp; /* Default init value<br>
&nbsp; bs2b_set_srate( bs2bdp, 44100L );<br>
&nbsp; bs2b_set_level( bs2bdp, BS2B_DEFAULT_CLEVEL );<br>
&nbsp; */<br>
            <br>
&nbsp; _setmode( _fileno( stdin ),&nbsp; _O_BINARY );<br>
&nbsp; _setmode( _fileno( stdout ), _O_BINARY );<br>
            <br>&nbsp; /* 16 bit raw PCM */<br>
&nbsp; while( 2 == fread( sample, sizeof( short ), 2, stdin ) )<br>
&nbsp; {<br>
&nbsp;&nbsp;&nbsp; bs2b_cross_feed_16( bs2bdp, sample );<br>
&nbsp; &nbsp; fwrite( sample, sizeof( short ), 2, stdout );<br>
&nbsp; }<br>
            <br>
&nbsp; bs2b_close( bs2bdp );<br>
&nbsp; bs2bdp = 0;<br>
            <br>
&nbsp; return 0 ;<br>
} /* main */</font><font size="-1"><br>
            </font> </td>
          </tr>
        </tbody>
      </table>
      <br>

Значение частоты дискретизации по умолчанию равно 44100 Гц. Значение
уровня взаимосмешения по умолчанию есть 'High Easy' (6). Если частота
дискретизации
аудио данных другая или вы хотите изменить уровень взаимосмешения то вы
должны вызвать функции 'bs2b_set_srate' и
'bs2b_set_level' соответственно.<br>
      <br>

      <span style="font-weight: bold;">Таблица 2. Пример использования библиотеки bs2b в C++.</span><br>

      
      <table style="width: 100%; background-color: rgb(255, 255, 204); text-align: left; font-family: courier new,courier,monospace;" border="0" cellpadding="2" cellspacing="2">

        <tbody>
          <tr>
            <td style="vertical-align: top;"><font size="-1"></font><font size="-1">#include &lt;stdio.h&gt;<br>
#include &lt;fcntl.h&gt;<br>
#include &lt;io.h&gt;<br>
            <br>
#include "bs2bclass.h"<br>
            <br>
int main( int argc, char *argv[] )<br>
{<br>
&nbsp; bs2b_base bs2b;<br>
            <br>
&nbsp; // bs2b.set_srate( 44100L );<br>
&nbsp; // bs2b.set_level( BS2B_DEFAULT_CLEVEL );<br>
            <br>
&nbsp; _setmode( _fileno( stdin ),&nbsp; _O_BINARY );<br>
&nbsp; _setmode( _fileno( stdout ), _O_BINARY );<br>
            <br>
&nbsp; short sample[ 2 ]; // </font><font size="-1">16 bit raw PCM</font><br>

            <font size="-1">&nbsp; while( 2 == fread( sample, sizeof( short ), 2, stdin ) )<br>
&nbsp; {<br>
&nbsp;&nbsp;&nbsp; bs2b.cross_feed( sample );<br>
&nbsp;&nbsp;&nbsp; fwrite( sample, sizeof( short ), 2, stdout );<br>
&nbsp; }<br>
            <br>
&nbsp; return 0 ;<br>
} /* main */</font><font size="-1"><br>
            </font> </td>
          </tr>
        </tbody>
      
      </table>

      <br>
      <hr style="width: 100%; height: 2px;">Авторское право (c)
2006&nbsp; Борис Михайлов &lt; <a href="http://www.tmn.ru/%7Ebor" target="_top">http://www.tmn.ru/~bor</a>&gt;</td>
    </tr>
  </tbody>
</table>
</body></html>